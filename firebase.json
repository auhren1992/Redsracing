
{
  "hosting": {
    "target": "production",
    "public": ".",
    "ignore": [
      "firebase.json",
      "firestore.rules",
      "storage.rules",
      ".firebaserc",
      ".github/**",
      ".git/**",
      "node_modules/**"
    ],
    "headers": [
      {
        "source": "**",
        "headers": [
          { "key": "Document-Policy", "value": "js-profiling" }
        ]
      },
      {
        "source": "**/*.html",
        "headers": [
          { "key": "Cache-Control", "value": "no-cache" }
        ]
      },
      {
        "source": "vendors.js",
        "headers": [
          { "key": "Cache-Control", "value": "public, max-age=604800, immutable" }
        ]
      },
      {
        "source": "**/*.js",
        "headers": [
          { "key": "Cache-Control", "value": "public, max-age=3600" }
        ]
      },
      {
        "source": "styles/*.css",
        "headers": [
          { "key": "Cache-Control", "value": "public, max-age=86400" }
        ]
      },
      {
        "source": "**/*.@(png|jpg|jpeg|svg|webp)",
        "headers": [
          { "key": "Cache-Control", "value": "public, max-age=2592000, immutable" }
        ]
      },
      {
        "source": "data/*.json",
        "headers": [
          { "key": "Cache-Control", "value": "public, max-age=300" }
        ]
      }
    ],
    "rewrites": [
      {
        "source": "/add_subscriber",
        "function": {
          "functionId": "handleAddSubscriber",
          "codebase": "python-api"
        }
      },
      {
        "source": "/send_feedback_email",
        "function": {
          "functionId": "handleSendFeedback",
          "codebase": "python-api"
        }
      },
      {
        "source": "/send_sponsorship_email",
        "function": {
          "functionId": "handleSendSponsorship",
          "codebase": "python-api"
        }
      },
      {
        "source": "/auth_action",
        "function": {
          "functionId": "handleAuthAction",
          "codebase": "python-api"
        }
      },
      {
        "source": "/password_reset",
        "function": {
          "functionId": "handlePasswordReset",
          "codebase": "python-api"
        }
      },
      {
        "source": "/profile/**",
        "function": {
          "functionId": "handleGetProfile",
          "codebase": "python-api"
        }
      },
      {
        "source": "/update_profile/**",
        "function": {
          "functionId": "handleUpdateProfile",
          "codebase": "python-api"
        }
      },
      {
        "source": "/achievements",
        "function": {
          "functionId": "handleGetAchievements",
          "codebase": "python-api"
        }
      },
      {
        "source": "/test",
        "function": {
          "functionId": "handleTest",
          "codebase": "python-api"
        }
      },
      {
        "source": "/leaderboard",
        "function": {
          "functionId": "handleGetLeaderboard",
          "codebase": "python-api"
        }
      },
      {
        "source": "/auto_award_achievement",
        "function": {
          "functionId": "handleAutoAwardAchievement",
          "codebase": "python-api"
        }
      },
      {
        "source": "/achievement_progress/**",
        "function": {
          "functionId": "handleGetAchievementProgress",
          "codebase": "python-api"
        }
      },
      {
        "source": "/assign_achievement",
        "function": {
          "functionId": "handleAssignAchievement",
          "codebase": "python-api"
        }
      },
      {
        "source": "/process_queues",
        "function": {
          "functionId": "handleProcessQueues",
          "codebase": "python-api"
        }
      },
      {
        "source": "/k1/addison/2025/jonny",
        "function": {
          "functionId": "fetchK1AddisonJonny",
          "codebase": "default"
        }
      },
      {
        "source": "/k1/addison/2025/jon",
        "function": {
          "functionId": "fetchK1AddisonJon",
          "codebase": "default"
        }
      },
      {
        "source": "/k1/addison/jon/seasons",
        "function": {
          "functionId": "fetchK1AddisonJonSeasons",
          "codebase": "default"
        }
      },
      {
        "source": "/speedhive/jon",
        "function": {
          "functionId": "fetchSpeedhiveJon",
          "codebase": "default"
        }
      },
      {
        "source": "/speedhive/event",
        "function": {
          "functionId": "fetchSpeedhiveEvent",
          "codebase": "default"
        }
      },
      {
        "source": "/api/speedhive/**",
        "run": { "serviceId": "speedhive-go-service", "region": "us-central1" }
      }
    ]
  },
  "functions": [
    {
      "source": "functions",
      "codebase": "default",
      "runtime": "nodejs20"
    },
    {
      "source": "functions_python",
      "codebase": "python-api",
      "runtime": "python312"
    }
  ],
  "firestore": {
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  },
  "storage": {
    "rules": "storage.rules"
  }
}
